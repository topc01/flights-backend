FROM node:21-alpine3.18
WORKDIR /usr/src/api
COPY package*.json ./

ENV REDIS_HOST ${REDIS_HOST}
ENV REDIS_PORT ${REDIS_PORT}
ENV REDIS_PASSWORD ${REDIS_PASSWORD}
ENV DEBUG ${DEBUG}
ENV MONGODB_HOST = ${MONGODB_HOST}
ENV MONGODB_PORT = ${MONGODB_PORT}
ENV MONGODB_DATABASE = ${MONGODB_DATABASE}
ENV GEOCODER_API_KEY = ${GEOCODER_API_KEY}

RUN npm install
COPY . .
CMD ["node", "index.js"]

FROM node:21-alpine3.18
WORKDIR /usr/src/api
COPY package*.json ./

ENV REDIS_HOST ${REDIS_HOST}
ENV REDIS_PORT ${REDIS_PORT}
ENV REDIS_PASSWORD ${REDIS_PASSWORD}
ENV DEBUG ${DEBUG}
ENV MASTER_PORT ${MASTER_PORT}

RUN npm install
COPY . .
EXPOSE ${MASTER_PORT}
CMD ["node", "api.js"]
